{% ckan_extends %}

{% block extras %}

    {% set rename_fields = {'harvest-author':'Author', 'datacite-resource-type':'Resource Type'}  %}
    {% set exclude_fields = ['resource-type', 'spatial_harvester'] %}
    {% for extra in h.sorted_extras(pkg_dict.extras, auto_clean=True, subs=rename_fields, exclude=exclude_fields) %}
      {% set key, value = extra %}

          <tr rel="dc:relation" resource="_:extra{{ i }}">

          {% if key == "Author" or key == "Publisher" or key == "Resource Type" %}
             <th scope="row" class="dataset-label" property="rdfs:label">{{ _(key) }}</th>
               <td class="dataset-details" property="rdf:value">
             {% for name in h.string_to_json(value)  %}
                  {{ name }}<br>
             {% endfor %}
             </td>
          {% elif key == "Dataset Reference Date" %}
             <th scope="row" class="dataset-label" property="rdfs:label">Publication Date</th>
             <td class="dataset-details">
             {% set dataset_reference_date = h.get_publication_date(pkg_dict) %}
                 {{ h.render_datetime(dataset_reference_date, date_format='%B %d %Y %I:%M %p', with_hours=True)}}
             </td>
           </tr>
          {% elif key == "Metadata Date" or "Temporal Extent" in key %}
             <th scope="row" class="dataset-label" property="rdfs:label">{{ _(key) }}</th>
             <td class="dataset-details">
                 {{ h.render_datetime(value, date_format='%B %d %Y %I:%M %p', with_hours=True) }}
             </td>
           </tr>
          {% else %}
             <th scope="row" class="dataset-label" property="rdfs:label">{{ _(key) }}</th>
             <td class="dataset-details" property="rdf:value">
              {{ value }}
             </td>
          {% endif %}
          </tr>
    {% endfor %}


{% endblock %}
